@using LegendOfRico.Data



<div class="displayGame">
    <div class="gameMenu">
        <EditForm Model="@characterModel" OnValidSubmit="CreateCharacter">
            <DataAnnotationsValidator />
            <ValidationSummary />
            <label>Nom du personnage</label>
            <InputText @bind-Value="characterModel.CharacterName" />
            <label>Type de personnage</label>

            <select @bind="characterModel.SelectedType" class="form-control">
                @foreach (var option in Enum.GetValues(typeof(TypeOfCharacter)))
                {
                    <option value="@option">@option.ToString()</option>
                }
            </select>
            <button type="submit">Créer</button>
        </EditForm>
    </div>
    <div class="intro">
        <h2>Bienvenue dans le monde mystique de Ricochico</h2>
        <p>Explorez ce royaume enchanteur où une aventure épique attend les courageux aventuriers. Au cœur de ce monde fantastique, le grand Ricochico, gardien légendaire, détient la clé d'une relique ancienne renfermant un pouvoir immense.</p>

        <p>Cette relique sacrée est divisée en quatre parties, chacune gardée par un puissant boss :</p>
        <ul>
            <li>Sun Wukong, le roi singe, dans la mystérieuse forêt de Sherloop.</li>
            <li>Le Scorpion Éternel, gardien énigmatique de la Dune Éternelle.</li>
            <li>Cher Tontaton, revenu d'entre les ombres, au Cimetière des Tontaton.</li>
            <li>Joy Bean, maître des rêves, dans l'ancienne cité de Joy Bean.</li>
        </ul>

        <p>Forgez votre destinée, brave aventurier, et dévoilez les secrets de chaque territoire. Seul un héros intrépide pourra accomplir cette quête périlleuse et débloquer le pouvoir ultime nécessaire pour défier le grand Ricochico.</p>

        <p>Que l'aventure commence, et que la légende de Ricochico s'écrive à travers vos exploits audacieux !</p>
    </div>
</div>

@code {
    private CharacterModel characterModel = new CharacterModel();

    [Parameter]
    public Game Game { get; set; }
    [Parameter]
    public EventCallback<TypeOfShow> TypeOfShowChange { get; set; }

    private void CreateCharacter()
    {
        Console.WriteLine("le bouton marche");
        Console.WriteLine(Game.FormShow);
        Game.Player = MakeCharacter(characterModel.CharacterName, characterModel.SelectedType);
        Game.FormShow = TypeOfShow.Map;
        StateHasChanged();
        Console.WriteLine(Game.FormShow);
        TypeOfShowChange.InvokeAsync();
    }

    public static Character MakeCharacter(string CName, TypeOfCharacter Type)
    {
        if (Type == TypeOfCharacter.Magicien)
        {
            return new Wizard { Name = CName, MapSprite = "img/character/spriteWizard.png" };
        }
        else if (Type == TypeOfCharacter.Guerrier)
        {
            return new Fighter { Name = CName, MapSprite = "img/character/spriteFighter.png" };
        }
        else if (Type == TypeOfCharacter.Voleur)
        {
            return new Rogue { Name = CName, MapSprite = "img/character/spriteRogue.png" };
        }
        else if (Type == TypeOfCharacter.clerc)
        {
            return new Cleric { Name = CName, MapSprite = "img/character/spriteCleric.png" };
        }
        else
        {
            return new Ranger { Name = CName, MapSprite = "img/character/spriteRanger.png" };
        }
    }
   
}
